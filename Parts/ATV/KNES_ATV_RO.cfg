@PART[_Knes_ATV_*]:FOR[RealismOverhaul]
{
	!MODULE[ModuleProbeControlPoint],* {}
	!MODULE[ModuleCommand],* {}
	!MODULE[ModuleReactionWheel],* {}
	!MODULE[ModuleSAS],* {}
	!MODULE[ModuleKerbNetAccess],* {}
	!MODULE[ModuleDataTransmitter],* {}
	!MODULE[ModuleScienceContainer],* {}
	!RESOURCE,* {}
}

@PART[_Knes_ATV_Adapter]:FOR[RealismOverhaul]
{
	%RSSROConfig = true
	@rescaleFactor = 1.8

	@title = ATV Nose Adapter
	@manufacturer = Aérospatiale
	@description = The adapter for ATV that attaches to the docking port.
	@category = Structural

	@mass = 0.8
}

@PART[_Knes_ATV_Antenna]:FOR[RealismOverhaul]
{
	%RSSROConfig = true
	@rescaleFactor = 1.8

	@title = ATV Antenna
	@manufacturer = Aérospatiale
	@description = Antenna for ATV for communication.

	@mass = 0.2
}

@PART[_Knes_ATV_Antenna]:FOR[RealismOverhaul]:NEEDS[RealAntennas]
{
	!MODULE[ModuleDataTransmitter],* {}
	%MODULE[ModuleRealAntenna] { %referenceGain = 3.0 }
}

@PART[_Knes_ATV_Cargo]:FOR[RealismOverhaul]
{
	%RSSROConfig = true
	@rescaleFactor = 1.8

	@title = ATV Pressurised Cargo Module
	@manufacturer = Aérospatiale
	@description = A pressurized container to contain cargo, delivering propellant, food, water, compressed gases and others, including dry cargo parts.

	@mass = 1.72

	MODULE
	{
		name = ModuleFuelTanks
		type = ServiceModule
		volume = 5099.5
		basemass = -1
		TANK
		{
			name = ElectricCharge
			amount = 2500
			maxAmount = 2500
		}
	}
}

@PART[_Knes_ATV_Flat_Adapter]:FOR[RealismOverhaul]
{
	%RSSROConfig = true
	@rescaleFactor = 1.8

	@title = ATV Flat Adapter
	@manufacturer = Aérospatiale
	@description = Flatter adapter for the ATV having various modular sizes.

	@mass = 0.8
}

@PART[_Knes_ATV_RCS_A]:FOR[RealismOverhaul]
{
	%RSSROConfig = true
	@rescaleFactor = 1.8

	@title = ATV RCS A
	@manufacturer = Aérospatiale
	@description = ATV RCS that attaches to the front of the vessel.

	@mass = 0.019

	MODULE
	{
		name = ModuleEngineConfigs
		type = ModuleRCS
		thrustRating = thrusterPower
		techLevel = 0
		minTechLevel = 0
		origTechLevel = 2
		engineType = L
		configuration = MMH+MON3
		modded = false

		// The Apollo R-4D thruster was about 3.4 kg - 3.6kg [1, 2], i estimate the quad's mass to be roughly 16 kg
		// 1. https://www.rocket.com/files/aerojet/documents/Capabilities/PDFs/Bipropellant%20Data%20Sheets.pdf
		// 2. https://www.apolloartifacts.com/2013/11/marquardt-r-4d-apollo-spacecraft-attitude-control-engine.html
		origMass = 0.016

		CONFIG
		{
			name = MMH+MON3
			thrusterPower = 0.445
			PROPELLANT
			{
				name = MMH
				ratio = 0.499
				DrawGauge = True
			}
			PROPELLANT
			{
				name = MON3
				ratio = 0.501
			}
			PROPELLANT
			{
				name = Helium
				ratio = 11.25
				ignoreForIsp = True
			}
			IspSL = 0.362
			IspV = 0.952
		}
	}
}

@PART[_Knes_ATV_RCS_B]:FOR[RealismOverhaul]
{
	%RSSROConfig = true
	@rescaleFactor = 1.8

	@title = ATV RCS B
	@manufacturer = Aérospatiale
	@description = ATV RCS that attaches to the back of the vessel.

	@mass = 0.0285

	MODULE
	{
		name = ModuleEngineConfigs
		type = ModuleRCS
		thrustRating = thrusterPower
		techLevel = 0
		minTechLevel = 0
		origTechLevel = 2
		engineType = L
		configuration = MMH+MON3
		modded = false

		// The Apollo R-4D thruster was about 3.4 kg - 3.6kg [1, 2], i estimate the quad's mass to be roughly 16 kg
		// 1. https://www.rocket.com/files/aerojet/documents/Capabilities/PDFs/Bipropellant%20Data%20Sheets.pdf
		// 2. https://www.apolloartifacts.com/2013/11/marquardt-r-4d-apollo-spacecraft-attitude-control-engine.html
		origMass = 0.016

		CONFIG
		{
			name = MMH+MON3
			thrusterPower = 0.445
			PROPELLANT
			{
				name = MMH
				ratio = 0.499
				DrawGauge = True
			}
			PROPELLANT
			{
				name = MON3
				ratio = 0.501
			}
			PROPELLANT
			{
				name = Helium
				ratio = 11.25
				ignoreForIsp = True
			}
			IspSL = 0.362
			IspV = 0.952
		}
	}
}

@PART[_Knes_ATV_SM]:FOR[RealismOverhaul]
{
	%RSSROConfig = true
	@rescaleFactor = 1.8

	@title = ATV Service Module
	@manufacturer = Aérospatiale
	@description = The service module contains the propellant required by the RCS and engines on the ATV.
	@category = Pods

	@mass = 5.15

	MODULE
	{
		name = ModuleProbeControlPoint
		minimumCrew = 1
		multiHop = True
	}

	MODULE
	{
		name = ModuleCommand
		minimumCrew = 0
		hasHibernation = True
		hibernationMultiplier = 0.00125
		defaultControlPointDisplayName = #autoLOC_6011003 //#autoLOC_6011003 = Default
		RESOURCE
		{
			name = ElectricCharge
			rate = 0.08
		}
		CONTROLPOINT
		{
			name = reverse
			displayName = #autoLOC_6011004 //#autoLOC_6011004 = Reversed
			orientation = 0,0,180
		}
	}

	MODULE
	{
		name = ModuleSAS
		SASServiceLevel = 3
	}

	MODULE
	{
		name = ModuleScienceContainer
		
		reviewActionName = #autoLOC_502201 //#autoLOC_502201 = Review Stored Data
		storeActionName = #autoLOC_502202 //#autoLOC_502202 = Store Experiments
		evaOnlyStorage = True // i.e. can nearby regular vessels also do this, or EVA only
		storageRange = 2.3
		canBeTransferredToInVessel = True
		canTransferInVessel = True
	}

	MODULE
	{
		name = ModuleFuelTanks
		type = ServiceModule
		volume = 10283.32477
		basemass = -1
		TANK
		{
			name = MON3
			amount = 1956.572
			maxAmount = 1956.572
		}
		TANK
		{
			name = MMH
			amount = 3321.75227
			maxAmount = 3321.75227
		}
		TANK
		{
			name = Helium
			amount = 10048
			maxAmount = 10048
		}
		TANK
		{
			name = ElectricCharge
			amount = 5000
			maxAmount = 5000
		}
	}

	@MODULE[ModuleEnginesFX]
	{
		@EngineType = LiquidFuel
		@minThrust = 0
		@maxThrust = 1.96 //4x490N thrusters
		@heatProduction = 90
		!PROPELLANT[MonoPropellant] {}
		PROPELLANT
		{
			name = MMH
			ratio = 0.495
			DrawGauge = True
		}
		PROPELLANT
		{
			name = MON3
			ratio = 0.505
		}
		PROPELLANT
		{
			name = Helium
			ratio = 14.1
			ignoreForIsp = True
		}
		@atmosphereCurve
		{
			@key,0 = 0 323
			@key,1 = 1 155
		}
		%ullage = False
		%pressureFed = True
		%ignitions = 500
	}
}

@PART[_Knes_ATV_SM]:FOR[RealismOverhaul]:NEEDS[RealAntennas]
{
	!MODULE[ModuleDataTransmitter],* {}
	%MODULE[ModuleRealAntenna] { %referenceGain = 2.0 }
}

@PART[_Knes_ATV_SolarPanel]:FOR[RealismOverhaul]
{
	%RSSROConfig = true
	@resourceName = 1.8

	@title = ATV Solar Panel
	@manufacturer = Aérospatiale
	@description = Solar panels for ATV. Attach 4 of them in a flattened X shape.

	@mass = 0.1

	@MODULE[ModuleDeployableSolarPanel]
	{
		@chargeRate = 1.2 //4.8kW expected from 4 solar panels, reduces to 3.8kW after 6 months in orbit
	}
}

@PART[_Knes_mrk_ECBM]:FOR[RealismOverhaul]
{
	%RSSROConfig = true
	@rescaleFactor = 1.44

	@title = MRC ECBM Passive
	@manufacturer = British Aerospace Ltd.
	@description = The Enhanced Common Berthing Mechanism is the docking port through which the MRC docks to the CBM found on Freedom/ISS. This is the passive version.

	@mass = 0.24 //assumed same as CBM

	@MODULE[ModuleDockingNode]
	{
		@nodeType = CBM
		%acquireForce = 0.5
		%acquireMinFwdDot = 0.8
		%acquireminRollDot = -3.40282347E+38
		%acquireRange = 0.25
		%acquireTorque = 0.5
		%captureMaxRvel = 0.1
		%captureMinFwdDot = 0.998
		%captureMinRollDot = -3.40282347E+38
		%captureRange = 0.05
		%minDistanceToReEngage = 0.25
		%undockEjectionForce = 0.1
	}
}

@PART[_Knes_mrk_ECBM_Active]:FOR[RealismOverhaul]
{
	%RSSROConfig = true
	@rescaleFactor = 1.44

	@title = MRC ECBM Active
	@manufacturer = British Aerospace Ltd.
	@description = The Enhanced Common Berthing Mechanism is the docking port through which the MRC docks to the CBM found on Freedom/ISS. This is the active version.

	@mass = 0.25

	@MODULE[ModuleDockingNode]
	{
		@nodeType = CBM
		%acquireForce = 0.5
		%acquireMinFwdDot = 0.8
		%acquireminRollDot = -3.40282347E+38
		%acquireRange = 0.25
		%acquireTorque = 0.5
		%captureMaxRvel = 0.1
		%captureMinFwdDot = 0.998
		%captureMinRollDot = -3.40282347E+38
		%captureRange = 0.05
		%minDistanceToReEngage = 0.25
		%undockEjectionForce = 0.1
	}
}
